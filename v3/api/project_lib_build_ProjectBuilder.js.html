<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>project/lib/build/ProjectBuilder.js - UI5 Tooling - API Reference</title>
    
    <meta name="description" content="UI5 Tooling - API Reference" />
    
        <meta name="keywords" content="openui5 sapui5 ui5 build development tool api reference" />
        <meta name="keyword" content="openui5 sapui5 ui5 build development tool api reference" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/SAP/ui5-tooling" target="_blank" class="menu-item" id="github_link" >GitHub</a></h2><h3>Modules</h3><ul><li><a href="module-@ui5_builder_processors_bundlers_flexChangesBundler.html">@ui5/builder/processors/bundlers/flexChangesBundler</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_bundlers_flexChangesBundler.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_bundlers_moduleBundler.html">@ui5/builder/processors/bundlers/moduleBundler</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_bundlers_moduleBundler.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_jsdoc_apiIndexGenerator.html">@ui5/builder/processors/jsdoc/apiIndexGenerator</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_jsdoc_apiIndexGenerator.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_jsdoc_jsdocGenerator.html">@ui5/builder/processors/jsdoc/jsdocGenerator</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_jsdoc_jsdocGenerator.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_jsdoc_sdkTransformer.html">@ui5/builder/processors/jsdoc/sdkTransformer</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_jsdoc_sdkTransformer.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_libraryLessGenerator.html">@ui5/builder/processors/libraryLessGenerator</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_libraryLessGenerator.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_minifier.html">@ui5/builder/processors/minifier</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_minifier.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_nonAsciiEscaper.html">@ui5/builder/processors/nonAsciiEscaper</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_nonAsciiEscaper.html#.default">default</a></li><li data-type='method'><a href="module-@ui5_builder_processors_nonAsciiEscaper.html#.getEncodingFromAlias">getEncodingFromAlias</a></li></ul></li><li><a href="module-@ui5_builder_processors_stringReplacer.html">@ui5/builder/processors/stringReplacer</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_stringReplacer.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_ThemeBuilder.html">@ui5/builder/processors/ThemeBuilder</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_ThemeBuilder.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_processors_versionInfoGenerator.html">@ui5/builder/processors/versionInfoGenerator</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_versionInfoGenerator.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_buildThemes.html">@ui5/builder/tasks/buildThemes</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_buildThemes.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_bundlers_generateBundle.html">@ui5/builder/tasks/bundlers/generateBundle</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_bundlers_generateBundle.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_bundlers_generateComponentPreload.html">@ui5/builder/tasks/bundlers/generateComponentPreload</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_bundlers_generateComponentPreload.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_bundlers_generateFlexChangesBundle.html">@ui5/builder/tasks/bundlers/generateFlexChangesBundle</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_bundlers_generateFlexChangesBundle.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_bundlers_generateLibraryPreload.html">@ui5/builder/tasks/bundlers/generateLibraryPreload</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_bundlers_generateLibraryPreload.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_bundlers_generateStandaloneAppBundle.html">@ui5/builder/tasks/bundlers/generateStandaloneAppBundle</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_bundlers_generateStandaloneAppBundle.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_escapeNonAsciiCharacters.html">@ui5/builder/tasks/escapeNonAsciiCharacters</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_escapeNonAsciiCharacters.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_generateCachebusterInfo.html">@ui5/builder/tasks/generateCachebusterInfo</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_generateCachebusterInfo.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_generateLibraryManifest.html">@ui5/builder/tasks/generateLibraryManifest</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_generateLibraryManifest.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_generateResourcesJson.html">@ui5/builder/tasks/generateResourcesJson</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_generateResourcesJson.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_generateThemeDesignerResources.html">@ui5/builder/tasks/generateThemeDesignerResources</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_generateThemeDesignerResources.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_generateVersionInfo.html">@ui5/builder/tasks/generateVersionInfo</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_generateVersionInfo.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_jsdoc_executeJsdocSdkTransformation.html">@ui5/builder/tasks/jsdoc/executeJsdocSdkTransformation</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_jsdoc_executeJsdocSdkTransformation.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_jsdoc_generateApiIndex.html">@ui5/builder/tasks/jsdoc/generateApiIndex</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_jsdoc_generateApiIndex.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_jsdoc_generateJsdoc.html">@ui5/builder/tasks/jsdoc/generateJsdoc</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_jsdoc_generateJsdoc.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_minify.html">@ui5/builder/tasks/minify</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_minify.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_replaceBuildtime.html">@ui5/builder/tasks/replaceBuildtime</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_replaceBuildtime.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_replaceCopyright.html">@ui5/builder/tasks/replaceCopyright</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_replaceCopyright.html#.default">default</a></li></ul></li><li><a href="module-@ui5_builder_tasks_replaceVersion.html">@ui5/builder/tasks/replaceVersion</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_tasks_replaceVersion.html#.default">default</a></li></ul></li><li><a href="module-@ui5_fs_fsInterface.html">@ui5/fs/fsInterface</a><ul class='methods'><li data-type='method'><a href="module-@ui5_fs_fsInterface.html#.default">default</a></li></ul></li><li><a href="module-@ui5_fs_resourceFactory.html">@ui5/fs/resourceFactory</a><ul class='methods'><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createAdapter">createAdapter</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createFilterReader">createFilterReader</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createFlatReader">createFlatReader</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createLinkReader">createLinkReader</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createReader">createReader</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createReaderCollection">createReaderCollection</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createReaderCollectionPrioritized">createReaderCollectionPrioritized</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createResource">createResource</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createWorkspace">createWorkspace</a></li><li data-type='method'><a href="module-@ui5_fs_resourceFactory.html#.createWriterCollection">createWriterCollection</a></li></ul></li><li><a href="module-@ui5_project_graph.html">@ui5/project/graph</a><ul class='methods'><li data-type='method'><a href="module-@ui5_project_graph.html#.graphFromObject">graphFromObject</a></li><li data-type='method'><a href="module-@ui5_project_graph.html#.graphFromPackageDependencies">graphFromPackageDependencies</a></li><li data-type='method'><a href="module-@ui5_project_graph.html#.graphFromStaticFile">graphFromStaticFile</a></li></ul></li><li><a href="module-@ui5_project_graph_ProjectGraphBuilder.html">@ui5/project/graph/ProjectGraphBuilder</a><ul class='methods'><li data-type='method'><a href="module-@ui5_project_graph_ProjectGraphBuilder.html#.default">default</a></li></ul></li><li><a href="module-@ui5_project_validation_validator.html">@ui5/project/validation/validator</a><ul class='methods'><li data-type='method'><a href="module-@ui5_project_validation_validator.html#.validate">validate</a></li></ul></li><li><a href="module-@ui5_server.html">@ui5/server</a><ul class='methods'><li data-type='method'><a href="module-@ui5_server.html#.serve">serve</a></li></ul></li></ul><h3>Classes</h3><ul><li><a href="@ui5_fs_AbstractReader.html">@ui5/fs/AbstractReader</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_AbstractReader.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_AbstractReader.html#.byPath#byPath">byPath</a></li></ul></li><li><a href="@ui5_fs_AbstractReaderWriter.html">@ui5/fs/AbstractReaderWriter</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_AbstractReaderWriter.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_AbstractReaderWriter.html#.byPath#byPath">byPath</a></li><li data-type='method'><a href="@ui5_fs_AbstractReaderWriter.html#.write#write">write</a></li></ul></li><li><a href="@ui5_fs_adapters_AbstractAdapter.html">@ui5/fs/adapters/AbstractAdapter</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_adapters_AbstractAdapter.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_adapters_AbstractAdapter.html#.byPath#byPath">byPath</a></li><li data-type='method'><a href="@ui5_fs_adapters_AbstractAdapter.html#.write#write">write</a></li></ul></li><li><a href="@ui5_fs_adapters_FileSystem.html">@ui5/fs/adapters/FileSystem</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_adapters_FileSystem.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_adapters_FileSystem.html#.byPath#byPath">byPath</a></li><li data-type='method'><a href="@ui5_fs_adapters_FileSystem.html#.write#write">write</a></li></ul></li><li><a href="@ui5_fs_adapters_Memory.html">@ui5/fs/adapters/Memory</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_adapters_Memory.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_adapters_Memory.html#.byPath#byPath">byPath</a></li><li data-type='method'><a href="@ui5_fs_adapters_Memory.html#.write#write">write</a></li></ul></li><li><a href="@ui5_fs_DuplexCollection.html">@ui5/fs/DuplexCollection</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_DuplexCollection.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_DuplexCollection.html#.byPath#byPath">byPath</a></li><li data-type='method'><a href="@ui5_fs_DuplexCollection.html#.write#write">write</a></li></ul></li><li><a href="@ui5_fs_ReaderCollection.html">@ui5/fs/ReaderCollection</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_ReaderCollection.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_ReaderCollection.html#.byPath#byPath">byPath</a></li></ul></li><li><a href="@ui5_fs_ReaderCollectionPrioritized.html">@ui5/fs/ReaderCollectionPrioritized</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_ReaderCollectionPrioritized.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_ReaderCollectionPrioritized.html#.byPath#byPath">byPath</a></li></ul></li><li><a href="@ui5_fs_readers_Filter.html">@ui5/fs/readers/Filter</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_readers_Filter.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_readers_Filter.html#.byPath#byPath">byPath</a></li></ul></li><li><a href="@ui5_fs_readers_Link.html">@ui5/fs/readers/Link</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_readers_Link.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_readers_Link.html#.byPath#byPath">byPath</a></li></ul></li><li><a href="@ui5_fs_Resource.html">@ui5/fs/Resource</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_Resource.html#.clone#clone">clone</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.getBuffer#getBuffer">getBuffer</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.getPath#getPath">getPath</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.getProject#getProject">getProject</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.getStatInfo#getStatInfo">getStatInfo</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.getStream#getStream">getStream</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.getString#getString">getString</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.hasProject#hasProject">hasProject</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.setBuffer#setBuffer">setBuffer</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.setPath#setPath">setPath</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.setProject#setProject">setProject</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.setStream#setStream">setStream</a></li><li data-type='method'><a href="@ui5_fs_Resource.html#.setString#setString">setString</a></li></ul></li><li><a href="@ui5_fs_ResourceFacade.html">@ui5/fs/ResourceFacade</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.clone#clone">clone</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.getBuffer#getBuffer">getBuffer</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.getPath#getPath">getPath</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.getProject#getProject">getProject</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.getStatInfo#getStatInfo">getStatInfo</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.getStream#getStream">getStream</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.getString#getString">getString</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.hasProject#hasProject">hasProject</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.setBuffer#setBuffer">setBuffer</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.setPath#setPath">setPath</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.setProject#setProject">setProject</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.setStream#setStream">setStream</a></li><li data-type='method'><a href="@ui5_fs_ResourceFacade.html#.setString#setString">setString</a></li></ul></li><li><a href="@ui5_fs_WriterCollection.html">@ui5/fs/WriterCollection</a><ul class='methods'><li data-type='method'><a href="@ui5_fs_WriterCollection.html#.byGlob#byGlob">byGlob</a></li><li data-type='method'><a href="@ui5_fs_WriterCollection.html#.byPath#byPath">byPath</a></li><li data-type='method'><a href="@ui5_fs_WriterCollection.html#.write#write">write</a></li></ul></li><li><a href="@ui5_project_build_helpers_TaskUtil.html">@ui5/project/build/helpers/TaskUtil</a><ul class='methods'><li data-type='method'><a href="@ui5_project_build_helpers_TaskUtil.html#.clearTag#clearTag">clearTag</a></li><li data-type='method'><a href="@ui5_project_build_helpers_TaskUtil.html#.getDependencies#getDependencies">getDependencies</a></li><li data-type='method'><a href="@ui5_project_build_helpers_TaskUtil.html#.getProject#getProject">getProject</a></li><li data-type='method'><a href="@ui5_project_build_helpers_TaskUtil.html#.getTag#getTag">getTag</a></li><li data-type='method'><a href="@ui5_project_build_helpers_TaskUtil.html#.isRootProject#isRootProject">isRootProject</a></li><li data-type='method'><a href="@ui5_project_build_helpers_TaskUtil.html#.registerCleanupTask#registerCleanupTask">registerCleanupTask</a></li><li data-type='method'><a href="@ui5_project_build_helpers_TaskUtil.html#.setTag#setTag">setTag</a></li></ul></li><li><a href="@ui5_project_build_ProjectBuilder.html">@ui5/project/build/ProjectBuilder</a><ul class='methods'><li data-type='method'><a href="@ui5_project_build_ProjectBuilder.html#.build#build">build</a></li></ul></li><li><a href="@ui5_project_graph_ProjectGraph.html">@ui5/project/graph/ProjectGraph</a><ul class='methods'><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.addExtension#addExtension">addExtension</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.addProject#addProject">addProject</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.build#build">build</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.declareDependency#declareDependency">declareDependency</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.declareOptionalDependency#declareOptionalDependency">declareOptionalDependency</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.getAllExtensions#getAllExtensions">getAllExtensions</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.getAllProjects#getAllProjects">getAllProjects</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.getDependencies#getDependencies">getDependencies</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.getExtension#getExtension">getExtension</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.getProject#getProject">getProject</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.getRoot#getRoot">getRoot</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.isSealed#isSealed">isSealed</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.join#join">join</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.resolveOptionalDependencies#resolveOptionalDependencies">resolveOptionalDependencies</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.seal#seal">seal</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.traverseBreadthFirst#traverseBreadthFirst">traverseBreadthFirst</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.traverseDepthFirst#traverseDepthFirst">traverseDepthFirst</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraph.html#.getDependencies#~getDependencies">getDependencies</a></li></ul></li><li><a href="@ui5_project_graph_providers_DependencyTree.html">@ui5/project/graph/providers/DependencyTree</a></li><li><a href="@ui5_project_graph_providers_NodePackageDependencies.html">@ui5/project/graph/providers/NodePackageDependencies</a></li><li><a href="@ui5_project_specifications_ComponentProject.html">@ui5/project/specifications/ComponentProject</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getCustomConfiguration#getCustomConfiguration">getCustomConfiguration</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getNamespace#getNamespace">getNamespace</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getReader#getReader">getReader</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getVersion#getVersion">getVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.getWorkspace#getWorkspace">getWorkspace</a></li><li data-type='method'><a href="@ui5_project_specifications_ComponentProject.html#.isFrameworkProject#isFrameworkProject">isFrameworkProject</a></li></ul></li><li><a href="@ui5_project_specifications_Extension.html">@ui5/project/specifications/Extension</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_Extension.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_Extension.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_Extension.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_Extension.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_Extension.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_Extension.html#.getVersion#getVersion">getVersion</a></li></ul></li><li><a href="@ui5_project_specifications_Project.html">@ui5/project/specifications/Project</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getCustomConfiguration#getCustomConfiguration">getCustomConfiguration</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getNamespace#getNamespace">getNamespace</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getReader#getReader">getReader</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getVersion#getVersion">getVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.getWorkspace#getWorkspace">getWorkspace</a></li><li data-type='method'><a href="@ui5_project_specifications_Project.html#.isFrameworkProject#isFrameworkProject">isFrameworkProject</a></li></ul></li><li><a href="@ui5_project_specifications_Specification.html">@ui5/project/specifications/Specification</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_Specification.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_Specification.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_Specification.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_Specification.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_Specification.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_Specification.html#.getVersion#getVersion">getVersion</a></li></ul></li><li><a href="@ui5_project_specifications_types_Application.html">@ui5/project/specifications/types/Application</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getCustomConfiguration#getCustomConfiguration">getCustomConfiguration</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getNamespace#getNamespace">getNamespace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getReader#getReader">getReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getVersion#getVersion">getVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.getWorkspace#getWorkspace">getWorkspace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Application.html#.isFrameworkProject#isFrameworkProject">isFrameworkProject</a></li></ul></li><li><a href="@ui5_project_specifications_types_extensions_ProjectShim.html">@ui5/project/specifications/types/extensions/ProjectShim</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getCollectionShims#getCollectionShims">getCollectionShims</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getConfigurationShims#getConfigurationShims">getConfigurationShims</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getDependencyShims#getDependencyShims">getDependencyShims</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ProjectShim.html#.getVersion#getVersion">getVersion</a></li></ul></li><li><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html">@ui5/project/specifications/types/extensions/ServerMiddleware</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html#.getMiddleware#getMiddleware">getMiddleware</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_ServerMiddleware.html#.getVersion#getVersion">getVersion</a></li></ul></li><li><a href="@ui5_project_specifications_types_extensions_Task.html">@ui5/project/specifications/types/extensions/Task</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_types_extensions_Task.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_Task.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_Task.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_Task.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_Task.html#.getTask#getTask">getTask</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_Task.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_types_extensions_Task.html#.getVersion#getVersion">getVersion</a></li></ul></li><li><a href="@ui5_project_specifications_types_Library.html">@ui5/project/specifications/types/Library</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getCustomConfiguration#getCustomConfiguration">getCustomConfiguration</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getNamespace#getNamespace">getNamespace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getReader#getReader">getReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getVersion#getVersion">getVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.getWorkspace#getWorkspace">getWorkspace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Library.html#.isFrameworkProject#isFrameworkProject">isFrameworkProject</a></li></ul></li><li><a href="@ui5_project_specifications_types_Module.html">@ui5/project/specifications/types/Module</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getCustomConfiguration#getCustomConfiguration">getCustomConfiguration</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getNamespace#getNamespace">getNamespace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getReader#getReader">getReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getVersion#getVersion">getVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.getWorkspace#getWorkspace">getWorkspace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_Module.html#.isFrameworkProject#isFrameworkProject">isFrameworkProject</a></li></ul></li><li><a href="@ui5_project_specifications_types_ThemeLibrary.html">@ui5/project/specifications/types/ThemeLibrary</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getCustomConfiguration#getCustomConfiguration">getCustomConfiguration</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getKind#getKind">getKind</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getName#getName">getName</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getNamespace#getNamespace">getNamespace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getReader#getReader">getReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getRootReader#getRootReader">getRootReader</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getSpecVersion#getSpecVersion">getSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getType#getType">getType</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getVersion#getVersion">getVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.getWorkspace#getWorkspace">getWorkspace</a></li><li data-type='method'><a href="@ui5_project_specifications_types_ThemeLibrary.html#.isFrameworkProject#isFrameworkProject">isFrameworkProject</a></li></ul></li><li><a href="@ui5_project_specifications_utils_SpecificationVersion.html">@ui5/project/specifications/utils/SpecificationVersion</a><ul class='methods'><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.eq">eq</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.gt">gt</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.gte">gte</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.isSupportedSpecVersion">isSupportedSpecVersion</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.lt">lt</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.lte">lte</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.major">major</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.minor">minor</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.neq">neq</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.satisfies">satisfies</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.eq#eq">eq</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.gt#gt">gt</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.gte#gte">gte</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.lt#lt">lt</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.lte#lte">lte</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.major#major">major</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.minor#minor">minor</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.neq#neq">neq</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.satisfies#satisfies">satisfies</a></li><li data-type='method'><a href="@ui5_project_specifications_utils_SpecificationVersion.html#.toString#toString">toString</a></li></ul></li><li><a href="@ui5_project_ui5Framework_AbstractResolver.html">@ui5/project/ui5Framework/AbstractResolver</a><ul class='methods'><li data-type='method'><a href="@ui5_project_ui5Framework_AbstractResolver.html#.install#install">install</a></li></ul></li><li><a href="@ui5_project_ui5Framework_Openui5Resolver.html">@ui5/project/ui5Framework/Openui5Resolver</a><ul class='methods'><li data-type='method'><a href="@ui5_project_ui5Framework_Openui5Resolver.html#.install#install">install</a></li></ul></li><li><a href="@ui5_project_ui5Framework_Sapui5Resolver.html">@ui5/project/ui5Framework/Sapui5Resolver</a><ul class='methods'><li data-type='method'><a href="@ui5_project_ui5Framework_Sapui5Resolver.html#.install#install">install</a></li></ul></li><li><a href="@ui5_project_validation_ValidationError.html">@ui5/project/validation/ValidationError</a></li><li><a href="@ui5_server_middleware_MiddlewareUtil.html">@ui5/server/middleware/MiddlewareUtil</a><ul class='methods'><li data-type='method'><a href="@ui5_server_middleware_MiddlewareUtil.html#.getDependencies#getDependencies">getDependencies</a></li><li data-type='method'><a href="@ui5_server_middleware_MiddlewareUtil.html#.getMimeInfo#getMimeInfo">getMimeInfo</a></li><li data-type='method'><a href="@ui5_server_middleware_MiddlewareUtil.html#.getPathname#getPathname">getPathname</a></li><li data-type='method'><a href="@ui5_server_middleware_MiddlewareUtil.html#.getProject#getProject">getProject</a></li></ul></li><li><a href="module-@ui5_builder_processors_ThemeBuilder.ThemeBuilder.html">@ui5/builder/processors/ThemeBuilder.ThemeBuilder</a><ul class='methods'><li data-type='method'><a href="module-@ui5_builder_processors_ThemeBuilder.ThemeBuilder.html#.build#build">build</a></li><li data-type='method'><a href="module-@ui5_builder_processors_ThemeBuilder.ThemeBuilder.html#.clearCache#clearCache">clearCache</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="@ui5_project_graph_ProjectGraphBuilder-NodeProvider.html">@ui5/project/graph/ProjectGraphBuilder~NodeProvider</a><ul class='methods'><li data-type='method'><a href="@ui5_project_graph_ProjectGraphBuilder-NodeProvider.html#.getDependencies#getDependencies">getDependencies</a></li><li data-type='method'><a href="@ui5_project_graph_ProjectGraphBuilder-NodeProvider.html#.getRootNode#getRootNode">getRootNode</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">project/lib/build/ProjectBuilder.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {promisify} from "node:util";
import rimraf from "rimraf";
const rimrafp = promisify(rimraf);
import * as resourceFactory from "@ui5/fs/resourceFactory";
import logger from "@ui5/logger";
const log = logger.getGroupLogger("build");
import composeProjectList from "./helpers/composeProjectList.js";
import BuildContext from "./helpers/BuildContext.js";
import prettyHrtime from "pretty-hrtime";

/**
 * @public
 * @class
 * @alias @ui5/project/build/ProjectBuilder
 */
class ProjectBuilder {
	/**
	 * Build Configuration
	 *
	 * @public
	 * @typedef {object} @ui5/project/build/ProjectBuilder~BuildConfiguration
	 * @property {boolean} [selfContained=false] Flag to activate self contained build
	 * @property {boolean} [cssVariables=false] Flag to activate CSS variables generation
	 * @property {boolean} [jsdoc=false] Flag to activate JSDoc build
	 * @property {boolean} [createBuildManifest=false]
	 * 			Whether to create a build manifest file for the root project.
	 *			This is currently only supported for projects of type 'library' and 'theme-library'
	 * @property {Array.&lt;string>} [includedTasks=[]] List of tasks to be included
	 * @property {Array.&lt;string>} [excludedTasks=[]] List of tasks to be excluded.
	 * 			If the wildcard '*' is provided, only the included tasks will be executed.
	 */

	/**
	 * Executes a project build, including all necessary or requested dependencies
	 *
	 * @public
	 * @param {@ui5/project/graph/ProjectGraph} graph Project graph
	 * @param {@ui5/builder/tasks/taskRepository} taskRepository Task Repository module
	 * @param {@ui5/project/build/ProjectBuilder~BuildConfiguration} [buildConfig] Build configuration
	 */
	constructor(graph, taskRepository, buildConfig) {
		if (!graph) {
			throw new Error(`Missing parameter 'graph'`);
		}
		if (!taskRepository) {
			throw new Error(`Missing parameter 'taskRepository'`);
		}
		if (!graph.isSealed()) {
			throw new Error(
				`Can not build project graph with root node ${graph.getRoot().getName()}: Graph is not sealed`);
		}

		this._graph = graph;
		this._buildContext = new BuildContext(graph, taskRepository, buildConfig);
	}

	/**
	 * Executes a project build, including all necessary or requested dependencies
	 *
	 * @public
	 * @param {object} parameters Parameters
	 * @param {string} parameters.destPath Target path
	 * @param {boolean} [parameters.cleanDest=false] Decides whether project should clean the target path before build
	 * @param {Array.&lt;string|RegExp>} [parameters.includedDependencies=[]]
	 *			List of names of projects to include in the build result
	 *			If the wildcard '*' is provided, all dependencies will be included in the build result.
	 * @param {Array.&lt;string|RegExp>} [parameters.excludedDependencies=[]]
	 *			List of names of projects to exclude from the build result.
	 * @param {object} [parameters.complexDependencyIncludes] TODO 3.0
	 * @returns {Promise} Promise resolving to &lt;code>undefined&lt;/code> once build has finished
	 */
	async build({
		destPath, cleanDest = false,
		includedDependencies = [], excludedDependencies = [],
		complexDependencyIncludes
	}) {
		if (!destPath) {
			throw new Error(`Missing parameter 'destPath'`);
		}
		if (complexDependencyIncludes) {
			if (includedDependencies.length || excludedDependencies.length) {
				throw new Error(
					"Parameter 'complexDependencyIncludes' can't be used in conjunction " +
					"with parameters 'includedDependencies' or 'excludedDependencies");
			}
		}
		const rootProjectName = this._graph.getRoot().getName();
		log.info(`Preparing build for project ${rootProjectName}`);
		log.info(`  Target directory: ${destPath}`);

		// Get project filter function based on include/exclude params
		// (also logs some info to console)
		const filterProject = await this._getProjectFilter({
			explicitIncludes: includedDependencies,
			explicitExcludes: excludedDependencies,
			complexDependencyIncludes
		});

		// Count total number of projects to build based on input
		const requestedProjects = this._graph.getAllProjects().map((p) => p.getName()).filter(function(projectName) {
			return filterProject(projectName);
		});

		const projectBuildContexts = await this._createRequiredBuildContexts(requestedProjects);
		const cleanupSigHooks = this._registerCleanupSigHooks();
		const fsTarget = resourceFactory.createAdapter({
			fsBasePath: destPath,
			virBasePath: "/"
		});

		const queue = [];
		const alreadyBuilt = [];

		// Create build queue based on graph depth-first search to ensure correct build order
		await this._graph.traverseDepthFirst(async ({project}) => {
			const projectName = project.getName();
			const projectBuildContext = projectBuildContexts.get(projectName);
			if (projectBuildContext) {
				// Build context exists
				//	=> This project needs to be built or, in case it has already
				//		been built, it's build result needs to be written out (if requested)
				queue.push(projectBuildContext);
				if (!projectBuildContext.getTaskRunner().requiresBuild()) {
					alreadyBuilt.push(projectName);
				}
			}
		});
		const buildLogger = log.createTaskLogger("🛠 ");
		buildLogger.addWork(queue.length - alreadyBuilt.length);
		if (queue.length > 1) { // Do not log if only the root project is being built
			log.info(`Processing ${queue.length} projects`);
			if (alreadyBuilt.length) {
				log.info(`  Reusing built results of ${alreadyBuilt.length} projects`);
				log.info(`  Building ${queue.length - alreadyBuilt.length} projects`);
			}

			if (log.isLevelEnabled("verbose")) {
				log.verbose(`  Required projects:`);
				log.verbose(`    ${queue
					.map((projectBuildContext) => {
						const projectName = projectBuildContext.getProject().getName();
						let msg;
						if (alreadyBuilt.includes(projectName)) {
							const buildMetadata = projectBuildContext.getTaskRunner().getBuildMetadata();
							const ts = new Date(buildMetadata.timestamp).toUTCString();
							msg = `*> ${projectName} /// already built at ${ts}`;
						} else {
							msg = `=> ${projectName}`;
						}
						return msg;
					})
					.join("\n    ")}`);
			}
		}

		if (cleanDest) {
			log.info(`Cleaning target directory...`);
			await rimrafp(destPath);
		}
		const startTime = process.hrtime();
		try {
			const pWrites = [];
			for (const projectBuildContext of queue) {
				const projectName = projectBuildContext.getProject().getName();
				log.verbose(`Processing project ${projectName}...`);

				// Only build projects that are not already build (i.e. provide a matching build manifest)
				if (!alreadyBuilt.includes(projectName)) {
					buildLogger.startWork(`Building project ${projectName}...`);
					await this._buildProject(projectBuildContext);
					buildLogger.completeWork(1);

					log.verbose(`Finished building project ${projectName}`);
				}
				if (!requestedProjects.includes(projectName)) {
					// Project has not been requested
					//	=> Its resources shall not be part of the build result
					continue;
				}

				log.verbose(`Writing out files...`);
				pWrites.push(this._writeResults(projectBuildContext, fsTarget));
			}
			await Promise.all(pWrites);
			log.info(`Build succeeded in ${this._getElapsedTime(startTime)}`);
		} catch (err) {
			log.error(`Build failed in ${this._getElapsedTime(startTime)}`);
			throw err;
		} finally {
			this._deregisterCleanupSigHooks(cleanupSigHooks);
			await this._executeCleanupTasks();
		}
	}

	async _createRequiredBuildContexts(requestedProjects) {
		const allProjects = this._graph.getAllProjects();
		const requiredProjects = new Set(allProjects.filter((project) => {
			return requestedProjects.includes(project.getName());
		}));

		const projectBuildContexts = new Map();

		for (const project of requiredProjects) {
			const projectName = project.getName();
			log.verbose(`Creating build context for project ${projectName}...`);
			const projectBuildContext = await this._buildContext.createProjectContext({
				project,
				log
			});

			const taskRunner = projectBuildContext.getTaskRunner();
			projectBuildContexts.set(projectName, projectBuildContext);

			if (taskRunner.requiresBuild() &amp;&amp; taskRunner.requiresDependencies()) {
				// This project needs to be built and required dependencies to be built as well
				this._graph.getDependencies(projectName).forEach((depName) => {
					if (projectBuildContexts.has(depName)) {
						// Build context already exists
						//	=> Dependency will be built
						return;
					}
					// Add dependency to list of projects to build
					const depProject = this._graph.getProject(depName);
					requiredProjects.add(depProject);
				});
			}
		}

		return projectBuildContexts;
	}

	async _getProjectFilter({
		complexDependencyIncludes,
		explicitIncludes,
		explicitExcludes
	}) {
		const {includedDependencies, excludedDependencies} = await composeProjectList(
			this._graph,
			complexDependencyIncludes || {
				includeDependencyTree: explicitIncludes,
				excludeDependencyTree: explicitExcludes
			}
		);

		if (includedDependencies.length) {
			if (includedDependencies.length === this._graph.getAllProjects().length - 1) {
				log.info(`  Including all dependencies`);
			} else {
				log.info(`  Requested dependencies:`);
				log.info(`    + ${includedDependencies.join("\n    + ")}`);
			}
		}
		if (excludedDependencies.length) {
			log.info(`  Excluded dependencies:`);
			log.info(`    - ${excludedDependencies.join("\n    + ")}`);
		}

		const rootProjectName = this._graph.getRoot().getName();
		return function projectFilter(projectName) {
			function projectMatchesAny(deps) {
				return deps.some((dep) => dep instanceof RegExp ?
					dep.test(projectName) : dep === projectName);
			}

			if (projectName === rootProjectName) {
				// Always include the root project
				return true;
			}

			if (projectMatchesAny(excludedDependencies)) {
				return false;
			}

			if (includedDependencies.includes("*") || projectMatchesAny(includedDependencies)) {
				return true;
			}

			return false;
		};
	}

	async _buildProject(projectBuildContext) {
		const project = projectBuildContext.getProject();
		const taskRunner = projectBuildContext.getTaskRunner();

		// Create readers for all dependencies
		const readers = [];
		await this._graph.traverseBreadthFirst(project.getName(), async function({project: dep}) {
			if (dep.getName() === project.getName()) {
				// Ignore project itself
				return;
			}
			readers.push(dep.getReader());
		});

		const dependencies = resourceFactory.createReaderCollection({
			name: `Dependency reader collection for project ${project.getName()}`,
			readers
		});

		await taskRunner.runTasks({
			workspace: project.getWorkspace(),
			dependencies,
		});
	}

	async _writeResults(projectBuildContext, target) {
		const project = projectBuildContext.getProject();
		const taskUtil = projectBuildContext.getTaskUtil();
		const buildConfig = this._buildContext.getBuildConfig();
		const reader = project.getReader({
			// Force buildtime (=namespaced) style when writing with a build manifest
			style: taskUtil.isRootProject() &amp;&amp; buildConfig.createBuildManifest ? "buildtime" : "runtime"
		});
		const resources = await reader.byGlob("/**/*");

		if (taskUtil.isRootProject() &amp;&amp; buildConfig.createBuildManifest) {
			// Create and write a build manifest metadata file
			const {
				default: createBuildManifest
			} = await import("./helpers/createBuildManifest.js");
			const metadata = await createBuildManifest(project, buildConfig);
			await target.write(resourceFactory.createResource({
				path: `/.ui5/build-manifest.json`,
				string: JSON.stringify(metadata, null, "\t")
			}));
		}

		await Promise.all(resources.map((resource) => {
			if (taskUtil.getTag(resource, taskUtil.STANDARD_TAGS.OmitFromBuildResult)) {
				log.silly(`Skipping write of resource tagged as "OmitFromBuildResult": ` +
					resource.getPath());
				return; // Skip target write for this resource
			}
			return target.write(resource);
		}));
	}

	async _executeCleanupTasks() {
		log.info("Executing cleanup tasks...");
		await this._buildContext.executeCleanupTasks();
	}

	_registerCleanupSigHooks() {
		const that = this;
		function createListener(exitCode) {
			return function() {
				// Asynchronously cleanup resources, then exit
				that._executeCleanupTasks().then(() => {
					process.exit(exitCode);
				});
			};
		}

		const processSignals = {
			"SIGHUP": createListener(128 + 1),
			"SIGINT": createListener(128 + 2),
			"SIGTERM": createListener(128 + 15),
			"SIGBREAK": createListener(128 + 21)
		};

		for (const signal of Object.keys(processSignals)) {
			process.on(signal, processSignals[signal]);
		}

		// TODO: Also cleanup for unhandled rejections and exceptions?
		// Add additional events like signals since they are registered on the process
		//	event emitter in a similar fashion
		// processSignals["unhandledRejection"] = createListener(1);
		// process.once("unhandledRejection", processSignals["unhandledRejection"]);
		// processSignals["uncaughtException"] = function(err, origin) {
		// 	const fs = require("fs");
		// 	fs.writeSync(
		// 		process.stderr.fd,
		// 		`Caught exception: ${err}\n` +
		// 		`Exception origin: ${origin}`
		// 	);
		// 	createListener(1)();
		// };
		// process.once("uncaughtException", processSignals["uncaughtException"]);

		return processSignals;
	}

	_deregisterCleanupSigHooks(signals) {
		for (const signal of Object.keys(signals)) {
			process.removeListener(signal, signals[signal]);
		}
	}

	/**
	 * Calculates the elapsed build time and returns a prettified output
	 *
	 * @private
	 * @param {Array} startTime Array provided by &lt;code>process.hrtime()&lt;/code>
	 * @returns {string} Difference between now and the provided time array as formatted string
	 */
	_getElapsedTime(startTime) {
		const timeDiff = process.hrtime(startTime);
		return prettyHrtime(timeDiff);
	}
}

export default ProjectBuilder;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Tue Dec 20 2022 13:15:16 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
